<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastermap应用集成方案（单页版）</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <style>
        /* 替换为欧美简约风格字体 */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Roboto', 'Inter', sans-serif;
            background-color: #f9fafb; /* 浅灰背景提升质感 */
            color: #111827; /* 深灰替代黑色，更柔和 */
            line-height: 1.7;
        }
        
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 3rem 2rem; /* 增加上下内边距 */
        }
        
        .header {
            text-align: center;
            margin: 6rem 0 8rem; /* 增大头部留白 */
            padding-bottom: 2.5rem;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .header-icon {
            font-size: 3.5rem; /* 适度缩小图标 */
            color: #0369a1; /* 深蓝色更显专业 */
            margin-bottom: 2rem;
        }
        
        .title {
            font-size: 2.8rem;
            font-weight: 700;
            margin-bottom: 1.2rem;
            color: #111827;
            letter-spacing: -0.02em; /* 收紧字母间距 */
        }
        
        .subtitle {
            font-size: 1.1rem;
            color: #4b5563;
            font-weight: 400;
            max-width: 600px;
            margin: 0 auto;
            letter-spacing: 0.01em;
        }
        
        .section {
            margin-bottom: 9rem; /* 增大区块间距 */
            scroll-margin-top: 3rem;
        }
        
        .section-title {
            font-size: 1.9rem;
            font-weight: 600;
            margin-bottom: 2.5rem;
            color: #111827;
            display: flex;
            align-items: center;
            letter-spacing: -0.01em;
        }
        
        .section-title i {
            color: #0369a1;
            margin-right: 1rem;
            font-size: 1.7rem;
        }
        
        .card {
            background-color: #ffffff;
            border-radius: 0.75rem; /* 适度减小圆角 */
            padding: 2.5rem;
            margin-bottom: 2.5rem;
            border: 1px solid #f0f0f0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.02); /* 轻微阴影提升层次 */
        }
        
        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
        }
        
        .card-title i {
            color: #0369a1;
            margin-right: 0.75rem;
        }
        
        /* 调整网格间距，增加留白 */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
        }
        
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
        }
        
        .table-container {
            overflow-x: auto;
            margin: 2rem 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 1px 2px rgba(0,0,0,0.03);
        }
        
        th, td {
            padding: 1.1rem 1.25rem; /* 增加表格内边距 */
            text-align: left;
            border-bottom: 1px solid #f3f4f6;
        }
        
        th {
            background-color: #f9fafb;
            font-weight: 600;
            color: #111827;
            font-size: 0.95rem;
        }
        
        td {
            font-size: 0.95rem;
            color: #374151;
        }
        
        tr:last-child td {
            border-bottom: none;
        }
        
        /* 简化徽章样式 */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 6px; /* 方角更显简约 */
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .badge-primary {
            background-color: #e0f2fe;
            color: #0369a1;
        }
        
        .badge-warning {
            background-color: #fff7ed;
            color: #c2410c;
        }
        
        .badge-danger {
            background-color: #fee2e2;
            color: #b91c1c;
        }
        
        .badge-medium {
            background-color: #fef3c7;
            color: #92400e;
        }
        
        .chart-container {
            height: 380px;
            margin: 2.5rem 0;
        }
        
        .architecture {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 3rem 0;
            gap: 1rem;
        }
        
        .layer {
            width: 65%; /* 适度缩小层级宽度 */
            padding: 1.25rem 1.5rem;
            border-radius: 6px;
            text-align: center;
            font-weight: 500;
            color: white;
            box-shadow: 0 3px 5px rgba(0,0,0,0.1);
            font-size: 0.95rem;
        }
        
        .layer-presentation {
            background-color: #0369a1; /* 深蓝主色 */
        }
        
        .layer-business {
            background-color: #047857; /* 深绿 */
        }
        
        .layer-data {
            background-color: #b45309; /* 深橙 */
        }
        
        .arrow {
            color: #9ca3af;
            font-size: 1.25rem;
        }
        
        .feature-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 1.25rem;
        }
        
        .feature-item i {
            color: #0369a1;
            margin-right: 0.75rem;
            margin-top: 0.35rem;
        }
        
        .highlight {
            font-weight: 600;
            color: #0369a1;
        }
        
        /* 简化结论卡片样式 */
        .conclusion-card {
            background: linear-gradient(to right, #f0f9ff, #f5fafe);
            border: none;
            text-align: center;
            padding: 3.5rem 2.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .conclusion-icon {
            font-size: 3.5rem;
            color: #b45309;
            margin-bottom: 1.75rem;
        }

        /* .architecture-diagram {
            width: 100%;
            margin: 3rem 0;
            text-align: center;
        } */

        .architecture-diagram
 {
    width: 100%;
    margin: 3rem 0;
    text-align: center;
    display: flex;
    flex-wrap: wrap;
    align-content: space-around;
    flex-direction: column;
}

        .architecture-diagram img {
            max-width: 90%; /* 缩小图片宽度，增加左右留白 */
            border-radius: 0.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        /* 调整卡片内元素样式 */
        .bg-white.p-4.rounded-lg {
            padding: 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid #f3f4f6;
        }
        
        .bg-sky-50.p-4.rounded-lg,
        .bg-emerald-50.p-4.rounded-lg,
        .bg-amber-50.p-4.rounded-lg {
            padding: 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid #f3f4f6;
        }
        
        .bg-gradient-to-r.from-sky-50.to-indigo-50.p-4.rounded-lg {
            padding: 1.75rem;
            border-radius: 0.5rem;
            border: 1px solid #e0e7ff;
        }
        
        /* 响应式调整 */
        @media (max-width: 768px) {
            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .layer {
                width: 100%;
            }
            
            .title {
                font-size: 2.2rem;
            }
            
            .section-title {
                font-size: 1.6rem;
            }
            
            .container {
                padding: 2rem 1.25rem;
            }
            
            .header {
                margin: 3rem 0 4rem;
            }
            
            .section {
                margin-bottom: 6rem;
            }
            
            .architecture-diagram img {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 头部 -->
        <div class="header">
            <div class="header-icon">
                <i class="fa fa-map-o"></i>
            </div>
            <h1 class="title">Mastermap应用集成方案</h1>
            <p class="subtitle">低耦合 · 可扩展 · 多技术栈兼容</p>
        </div>

        <!-- 一、项目背景 -->
        <section class="section" id="background">
            <h2 class="section-title"><i class="fa fa-info-circle"></i>一、项目背景</h2>
            <div class="card">
                <p class="text-lg mb-8">为实现Mastermap平台的高扩展性与多项目并行开发能力，需构建一个<span class="highlight">低耦合、可独立部署、技术栈兼容、运行隔离、渐进升级</span>的应用集成架构。</p>
                
                <h3 class="card-title"><i class="fa fa-bullseye"></i>核心目标</h3>
                <div class="grid-2">
                    <div class="feature-item">
                        <i class="fa fa-check-circle"></i>
                        <span>子应用支持独立开发、构建与发布</span>
                    </div>
                    <div class="feature-item">
                        <i class="fa fa-check-circle"></i>
                        <span>支持React/Angular等多技术栈集成</span>
                    </div>
                    <div class="feature-item">
                        <i class="fa fa-check-circle"></i>
                        <span>样式与全局变量隔离，避免冲突</span>
                    </div>
                    <div class="feature-item">
                        <i class="fa fa-check-circle"></i>
                        <span>平台升级不影响子应用运行</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- 二、方案设计 -->
        <section class="section" id="design">
            <h2 class="section-title"><i class="fa fa-sitemap"></i>二、方案设计</h2>
            <!-- 2.1 架构模型 -->
            <div class="card">
                <h3 class="card-title"><i class="fa fa-cubes"></i>2.1 架构模型</h3>
                <p class="text-lg mb-6">采用 <span class="highlight">Mastermap平台 + NPM组件 + Restful API</span> 模式，实现模块解耦与功能扩展。</p>
                
                <h3 class="card-title mt-8"><i class="fa fa-sitemap"></i>整体架构图</h3>
                <div class="architecture-diagram" >
                    <img src="a.svg" alt="Mastermap应用集成架构图" />
                    <p class="text-sm text-gray-500 mt-3">Mastermap应用集成架构示意图（基座平台与子应用交互关系）</p>
                </div>

                <h3 class="card-title"><i class="fa fa-copy"></i>架构分层</h3>
                <div class="architecture">
                    <div class="layer layer-presentation">表现层：公共UI组件 + 界面渲染</div>
                    <div class="arrow"><i class="fa fa-chevron-down"></i></div>
                    <div class="layer layer-business">业务层：GIS分析 + 用户交互逻辑</div>
                    <div class="arrow"><i class="fa fa-chevron-down"></i></div>
                    <div class="layer layer-data">数据层：PostgreSQL + Redis</div>
                </div>
            </div>
            
            <!-- 2.2 通信机制 -->
            <div class="card">
                <h3 class="card-title"><i class="fa fa-exchange"></i>2.2 通信机制</h3>
                <div class="grid-2 gap-4">
                    <div class="bg-white p-4 rounded-lg shadow-sm">
                        <div class="flex items-center mb-3">
                            <i class="fa fa-globe text-2xl text-sky-600 mr-3"></i>
                            <h4 class="font-semibold text-gray-800">Restful API</h4>
                        </div>
                        <p class="text-gray-600">支持跨平台、跨语言集成，标准化接口设计</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm">
                        <div class="flex items-center mb-3">
                            <i class="fa fa-bolt text-2xl text-amber-500 mr-3"></i>
                            <h4 class="font-semibold text-gray-800">WebSocket</h4>
                        </div>
                        <p class="text-gray-600">实时数据推送（交通、气象等动态信息）</p>
                    </div>
                </div>
            </div>
            
            <!-- 2.3 平台组成 -->
            <div class="card">
                <h3 class="card-title"><i class="fa fa-list-alt"></i>2.3 平台组成</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>模块</th>
                                <th>职责</th>
                                <th>技术要点</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="font-medium">公共模块</td>
                                <td>GIS组件、工具函数、基础服务</td>
                                <td>React封装、NPM发布、版本控制</td>
                            </tr>
                            <tr>
                                <td class="font-medium">基础API</td>
                                <td>数据、状态、权限、版本兼容</td>
                                <td>Restful接口、语义化版本</td>
                            </tr>
                            <tr>
                                <td class="font-medium">基础数据</td>
                                <td>地图、用户、授权数据支持</td>
                                <td>PostgreSQL + Redis</td>
                            </tr>
                            <tr>
                                <td class="font-medium">扩展应用</td>
                                <td>业务定制开发，独立部署</td>
                                <td>模块化设计，产品族复用</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- 2.4 应用集成机制 -->
            <div class="card">
                <h3 class="card-title"><i class="fa fa-plug"></i>2.4 应用集成机制</h3>
                <div class="grid-3 gap-4">
                    <div class="bg-white p-4 rounded-lg">
                        <h4 class="font-semibold text-gray-800 mb-3 flex items-center"><i class="fa fa-code text-sky-500 mr-2"></i>组件集成</h4>
                        <ul class="list-disc list-inside text-gray-700 text-sm space-y-2">
                            <li>npm引入公共组件</li>
                            <li>指定版本号</li>
                            <li>避免版本冲突</li>
                        </ul>
                    </div>
                    <div class="bg-white p-4 rounded-lg">
                        <h4 class="font-semibold text-gray-800 mb-3 flex items-center"><i class="fa fa-database text-emerald-500 mr-2"></i>数据交互</h4>
                        <ul class="list-disc list-inside text-gray-700 text-sm space-y-2">
                            <li>Restful API / WebSocket</li>
                            <li>主版本号一致</li>
                            <li>双版本并行</li>
                        </ul>
                    </div>
                    <div class="bg-white p-4 rounded-lg">
                        <h4 class="font-semibold text-gray-800 mb-3 flex items-center"><i class="fa fa-cogs text-purple-500 mr-2"></i>模块开发</h4>
                        <ul class="list-disc list-inside text-gray-700 text-sm space-y-2">
                            <li>前端：领域功能开发</li>
                            <li>后端：独立服务</li>
                            <li>GraphQL扩展</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- 2.5 优劣分析 -->
            <div class="card">
                <h3 class="card-title"><i class="fa fa-balance-scale"></i>2.5 优劣分析</h3>
                <div class="grid-2 gap-8">
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-3 flex items-center"><i class="fa fa-thumbs-up text-green-500 mr-2"></i>优势</h4>
                        <ul class="list-disc list-inside text-gray-700 space-y-2">
                            <li>技术栈无关，架构灵活</li>
                            <li>模块隔离，版本独立</li>
                            <li>可独立部署，并行开发</li>
                            <li>扩展性强，易于维护</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-3 flex items-center"><i class="fa fa-exclamation-triangle text-amber-500 mr-2"></i>挑战与应对</h4>
                        <ul class="list-disc list-inside text-gray-700 space-y-2">
                            <li>初期模块化重构成本高 → 分阶段实施</li>
                            <li>API稳定性要求高 → 严格版本控制</li>
                            <li>版本管理复杂 → 标准化流程</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- 三、优化策略 -->
        <section class="section" id="optimization">
            <h2 class="section-title"><i class="fa fa-line-chart"></i>三、优化策略</h2>
            
            <!-- 3.1 数据同步策略 -->
            <div class="card">
                <h3 class="card-title"><i class="fa fa-sync"></i>3.1 数据同步策略</h3>
                <div class="grid-3 gap-4">
                    <div class="bg-sky-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-sky-800 mb-2">实时数据</h4>
                        <p class="text-gray-700 text-sm">在线订阅推送，保障实时性</p>
                    </div>
                    <div class="bg-emerald-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-emerald-800 mb-2">静态数据</h4>
                        <p class="text-gray-700 text-sm">版本化快照，兼容性校验</p>
                    </div>
                    <div class="bg-amber-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-amber-800 mb-2">数据迁移</h4>
                        <p class="text-gray-700 text-sm">自动化脚本，迁移记录</p>
                    </div>
                </div>
            </div>
            
            <!-- 3.2 跨平台开发策略 -->
            <div class="card">
                <h3 class="card-title"><i class="fa fa-desktop"></i>3.2 跨平台开发策略</h3>
                <div class="table-container mb-6">
                    <table>
                        <thead>
                            <tr>
                                <th>方案</th>
                                <th>技术栈</th>
                                <th>推荐指数</th>
                                <th>说明</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="font-medium">React + Flutter</td>
                                <td>Web + 移动端</td>
                                <td><span class="badge badge-warning">★★☆</span></td>
                                <td>Web先行，Flutter后续补充</td>
                            </tr>
                            <tr class="bg-sky-50">
                                <td class="font-medium text-sky-700">React Native</td>
                                <td>Web + 移动端 + 桌面端</td>
                                <td><span class="badge badge-primary">★★★（推荐）</span></td>
                                <td>统一技术栈，开发效率高，社区成熟</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="bg-gradient-to-r from-sky-50 to-indigo-50 p-4 rounded-lg mb-6">
                    <div class="flex items-start">
                        <i class="fa fa-lightbulb-o text-3xl text-amber-500 mt-1 mr-4"></i>
                        <div>
                            <h4 class="font-semibold text-xl text-gray-800">推荐建议</h4>
                            <p class="text-gray-700 text-lg mt-1">优先采用 <span class="highlight font-bold">React Native方案</span>，实现Web与移动端一致渲染，后续可扩展至桌面端，最大化复用代码，降低维护成本。</p>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="crossPlatformChart"></canvas>
                </div>
            </div>
        </section>

        <!-- 四、风险评估 -->
        <section class="section" id="risk">
            <h2 class="section-title"><i class="fa fa-exclamation-triangle"></i>四、风险评估</h2>
            <div class="card">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>风险类型</th>
                                <th>具体风险点</th>
                                <th>风险等级</th>
                                <th>应对措施</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="font-medium">开发成本风险</td>
                                <td>基座模块化重构耗时；<br>API多版本兼容成本高</td>
                                <td><span class="badge badge-medium">中等</span></td>
                                <td>分阶段重构（先核心模块）；<br>API设计预留扩展字段；<br>建立版本兼容测试矩阵</td>
                            </tr>
                            <tr>
                                <td class="font-medium">跨平台技术风险</td>
                                <td>React Native性能/兼容问题；<br>方案切换成本</td>
                                <td><span class="badge badge-primary">低（可控）</span></td>
                                <td>1. RN开发成本估计仅占10%，影响范围小；<br>2. 与Flutter方案完全兼容，切换代价低；<br>3. 提前进行设备兼容性测试，规避适配问题。</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- 五、结论 -->
        <section class="section" id="conclusion">
            <h2 class="section-title"><i class="fa fa-check-circle"></i>五、结论</h2>
            <div class="card conclusion-card">
                <div class="conclusion-icon">
                    <i class="fa fa-trophy"></i>
                </div>
                <p class="text-lg leading-relaxed max-w-3xl mx-auto mb-8">
                    Mastermap应用集成方案通过 <span class="highlight font-semibold">模块化架构 + NPM组件 + API服务</span> 实现平台与扩展应用的低耦合协作，支持多项目并行开发与独立部署。结合React Native跨平台策略，具备良好扩展性与技术前瞻性，适用于GIS平台的长期演进与业务拓展。
                </p>
                
                <div class="grid-3 gap-4 max-w-3xl mx-auto">
                    <div class="bg-white p-4 rounded-lg shadow-sm">
                        <h4 class="font-semibold text-gray-800 mb-2">低耦合</h4>
                        <p class="text-gray-600 text-sm">模块独立，互不影响</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm">
                        <h4 class="font-semibold text-gray-800 mb-2">高扩展</h4>
                        <p class="text-gray-600 text-sm">多技术栈支持，易于扩展</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm">
                        <h4 class="font-semibold text-gray-800 mb-2">高效率</h4>
                        <p class="text-gray-600 text-sm">并行开发，组件复用</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // 初始化跨平台方案对比图表
        document.addEventListener('DOMContentLoaded', function() {
            const ctx = document.getElementById('crossPlatformChart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['开发效率(development efficiency)', '跨平台覆盖(cross-platform coverage)', '社区支持(community support)', '性能表现(performance)', '维护成本(maintenance cost)'],
                    datasets: [
                        {
                            label: 'React + Flutter',
                            data: [70, 80, 85, 90, 65],
                            backgroundColor: 'rgba(202, 138, 4, 0.15)', // 更淡的颜色
                            borderColor: 'rgba(180, 83, 9, 1)',
                            pointBackgroundColor: 'rgba(180, 83, 9, 1)',
                            pointBorderColor: '#fff',
                            pointHoverRadius: 5,
                            borderWidth: 2
                        },
                        {
                            label: 'React Native',
                            data: [90, 95, 90, 85, 80],
                            backgroundColor: 'rgba(3, 105, 161, 0.15)', // 更淡的颜色
                            borderColor: 'rgba(3, 105, 161, 1)',
                            pointBackgroundColor: 'rgba(3, 105, 161, 1)',
                            pointBorderColor: '#fff',
                            pointHoverRadius: 5,
                            borderWidth: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: {
                                color: 'rgba(0, 0, 0, 0.03)'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.03)'
                            },
                            pointLabels: {
                                font: {
                                    size: 12,
                                    weight: '500',
                                    family: 'Roboto'
                                },
                                color: '#374151'
                            },
                            ticks: {
                                backdropColor: 'transparent',
                                color: '#6b7280'
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 25,
                                font: {
                                    size: 12,
                                    family: 'Roboto'
                                },
                                color: '#374151'
                            }
                        }
                    }
                }
            });
        });

        // 平滑滚动
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>
