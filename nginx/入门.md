使用 `apt install nginx` 安装后，Nginx 的程序文件、配置文件及静态资源目录会分布在系统多个路径下，默认配置通过 `server` 块和 `location` 块将请求定向到 `/usr/share/nginx/html/index.html`。以下是详细路径、配置解析及静态网页创建与本地域名配置步骤：

### **一、安装后生成的文件路径**

1. **程序文件**
    - 主程序：`/usr/sbin/nginx`
    - 模块文件：`/usr/lib/nginx/modules/`
    - 工具脚本：`/usr/share/nginx/`（如错误页面模板）
2. **配置文件**
    - **主配置文件**：`/etc/nginx/nginx.conf`
         包含全局设置（如工作进程数、日志路径）和 `http` 块。
    - **虚拟主机配置**：
        - 可用配置：`/etc/nginx/sites-available/default`
        - 启用配置：`/etc/nginx/sites-enabled/default`（通过符号链接指向 `sites-available`）
    - **其他配置**：
        - MIME 类型：`/etc/nginx/mime.types`
        - 片段配置：`/etc/nginx/snippets/`（如 SSL 配置）
3. **静态资源目录**
    - 默认网页根目录：`/usr/share/nginx/html/`
         包含 `index.html`（默认首页）和 `50x.html`（错误页面）。
    - 日志文件：
        - 访问日志：`/var/log/nginx/access.log`
        - 错误日志：`/var/log/nginx/error.log`

### **二、默认配置如何定向到 `index.html`**

在 `/etc/nginx/sites-available/default` 的 `server` 块中，通过以下配置实现：

```nginx
server {
    listen 80 default_server;
    listen [::]:80 default_server;
    server_name _;
 
    root /usr/share/nginx/html;
    index index.html index.htm;  # 指定默认首页文件
 
    location / {
        try_files $uri $uri/ =404;  # 尝试按顺序查找文件
    }
}
```

- **关键指令**：
    - `root`：指定网页根目录。
    - `index`：定义默认首页文件列表（按顺序查找）。
    - `try_files`：若请求路径无对应文件，返回 `404`。

### **三、创建静态网页并配置本地域名**

#### **1. 创建静态网页**

1. **创建网页目录**

    ```bash
    sudo mkdir -p /var/www/my_site/html
    sudo chown -R $USER:$USER /var/www/my_site/html  # 赋予当前用户权限
    ```

2. **编写 HTML 文件**

    ```bash
    nano /var/www/my_site/html/index.html
    ```

    示例内容：

    ```html
    <!DOCTYPE html>
    <html>
    <head>
        <title>My Static Site</title>
    </head>
    <body>
        <h1>Welcome to My Site!</h1>
        <p>This is a static page served by Nginx.</p>
    </body>
    </html>
    ```

#### **2. 配置 Nginx 虚拟主机**

1. **创建配置文件**

    ```bash
    bash
    
    sudo nano /etc/nginx/sites-available/my_site
    ```

    内容如下：

    ```nginx
    server {
        listen 80;
        server_name my_site.local;  # 本地域名
     
        root /var/www/my_site/html;
        index index.html;
     
        location / {
            try_files $uri $uri/ =404;
        }
    }
    ```

2. **启用配置**

    ```bash
    sudo ln -s /etc/nginx/sites-available/my_site /etc/nginx/sites-enabled/
    ```

3. **测试并重启 Nginx**

    ```bash
    sudo nginx -t  # 测试配置语法
    sudo systemctl restart nginx
    ```

#### **3. 配置本地域名解析**

编辑 `/etc/hosts` 文件：

```bash
bash

sudo nano /etc/hosts
```

添加以下行（将 `127.0.0.1` 替换为服务器实际 IP）：

```
127.0.0.1 my_site.local
```

### **四、验证**

1. 在浏览器访问 `http://my_site.local`，应显示自定义的 `index.html` 内容。

2. 检查 Nginx 日志：

    ```bash
    tail -f /var/log/nginx/access.log
    tail -f /var/log/nginx/error.log
    ```

### **五、关键点总结**

- **路径规范**：Nginx 配置文件遵循 `/etc/nginx/` 目录结构，静态资源默认在 `/usr/share/nginx/html/`。
- **定向机制**：通过 `root` + `index` + `try_files` 实现首页自动加载。
- **自定义流程**：创建目录→编写 HTML→配置虚拟主机→启用配置→修改 `hosts` 文件。
- **调试技巧**：使用 `nginx -t` 验证配置，通过日志排查问题。